%header
    %h1 Asq
    
    %a.open.icon.database{ :href => '#', 'data-ref' => 'db' } DB
    %a.open.icon.list{ :href => '#', 'data-ref' => 'list' } List

    %input.search-in-queries{ :type => 'search', :placeholder => sprintf('Search %d queries', @queries.count) }

    %a.open.icon.add{ :href => '#', 'data-ref' => 'edit' } Add
    %a.open.icon.edit.hide{ :href => '#', 'data-ref' => 'edit' } Edit

    %input.search-in-results{ :type => 'search', :placeholder => 'Search in results' }

%section#list.hide
    %div
        %h1 All saved queries
        - if @queries.count != 0
            .query-list
                %ul
                    - @queries.each do |query|
                        %li
                            %a{ :href => '#', :id => sprintf('query-%d', query[:id]) }
                                %span= query[:id]
                                %strong= query[:name]
                                %small= query[:description]
        - else
            %p
                No queries yet.
                %a.open{ :href => '#', 'data-ref' => 'edit' } Add one?

%section#edit.hide
    %div
        %h1 Edit query
        %form{ :action => '/add', :method => 'post' }
            %p
                %label{ :for => 'edit-name' } Name
                %input#edit-name{ :name => 'edit-name' }
            %p
                %label{ :for => 'edit-description' } Description
                %textarea#edit-description{ :name => 'edit-description' }
            %p
                %label{ :for => 'edit-query' } Query
                %textarea#edit-query{ :name => 'edit-query' }
            %p
                %input{ :type => 'hidden', :id => 'edit-id', :name => 'edit-id', :value => 'false' }
                %input{ :type => 'submit', :id => 'edit-submit', :value => 'Add…' }

%section#db.hide
    %div
        %h1 Select a database
        %p
            %select#dblist
                - @dbs.each do |dba|
                    %option{ :value => dba[:Database] }= dba[:Database]

        %p
            %input{ :type => 'submit', :id => 'db-submit', :value => 'Choose…' }